#pragma checksum "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/Gestion/Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "f05b3cd144eb24530bf764d7feba90ae1e9a9359"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Gestion_Index), @"mvc.1.0.view", @"/Views/Gestion/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/_ViewImports.cshtml"
using Gestion.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/_ViewImports.cshtml"
using Gestion.Web.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/_ViewImports.cshtml"
using Gestion.Web.ViewModels.Input;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"f05b3cd144eb24530bf764d7feba90ae1e9a9359", @"/Views/Gestion/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"3bee31758dd1cbb7e600e265aed2cb74227e9428", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Gestion_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<Gestion.EF.ItemCargaHome>
    #nullable disable
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/Gestion/Index.cshtml"
  
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutGestion.cshtml";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"<section class=""content"">
    <div class=""container-fluid"">
        <div class=""row"">
            <div class=""col-sm-12  col-md-12"">
                <div class=""card"">
                    <div class=""card-header"">
                        <h3 class=""card-title""><font style=""vertical-align: inherit;""><strong>Resumen Incidentes</strong></font></h3>
                        <div class=""card-tools"">
                            <button type=""button"" class=""btn btn-tool"" data-card-widget=""collapse"" data-toggle=""tooltip"" title=""Colapso"">
                                <i class=""fas fa-minus""></i>
                            </button>
                        </div>
                    </div>
                    <div class=""card-body"">
                        <div class=""row"">
                            <div class=""col-lg-3 col-6"" id=""Conten_Creados"">
                                <!-- small box -->
                                <div class=""small-box bg-info"">
                                    ");
            WriteLiteral(@"<div class=""inner"">
                                        <h3>
                                            <span id=""Conten_IncCreados""></span>
                                        </h3>
                                        <p>Incidentes creados</p>
                                    </div>
                                    <div class=""icon"">
                                        <i class=""ion ion-bag""></i>
                                    </div>
                                </div>
                            </div>
                            <!-- ./col -->
                            <div class=""col-lg-3 col-6"" id=""Conten_Asignados"">
                                <!-- small box -->
                                <div class=""small-box bg-success"">
                                    <div class=""inner"">
                                        <h3>
                                            <span id=""Conten_IncAsignados""></span>
                                        <");
            WriteLiteral(@"/h3>
                                        <p>Incidentes asignados</p>
                                    </div>
                                    <div class=""icon"">
                                        <i class=""ion ion-stats-bars""></i>
                                    </div>
                                </div>
                            </div>
                            <!-- ./col -->
                            <div class=""col-lg-3 col-6"" id=""Conten_PorVencer"">
                                <!-- small box -->
                                <div class=""small-box bg-warning"">
                                    <div class=""inner"">
                                        <h3>
                                            <span id=""Conten_IncPorVencer""></span>
                                        </h3>

                                        <p>Asignados/Creados por vencer</p>
                                    </div>
                                    <div class=""icon");
            WriteLiteral(@""">
                                        <i class=""ion ion-person-add""></i>
                                    </div>
                                </div>
                            </div>
                            <!-- ./col -->
                            <div class=""col-lg-3 col-6"" id=""Conten_Vencidos"">
                                <!-- small box -->
                                <div class=""small-box bg-danger"">
                                    <div class=""inner"">
                                        <h3><span id=""Conten_IncVencidos""></span></h3>
                                        <p>Asignados/Creados vencidos</p>
                                    </div>
                                    <div class=""icon"">
                                        <i class=""ion ion-pie-graph""></i>
                                    </div>
                                </div>
                            </div>
                            <!-- ./col -->
                       ");
            WriteLiteral(@" </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>
<section class=""content"">
    <div class=""container-fluid"">
        <div class=""row"">
            <div class=""col-sm-12  col-md-12"">
                <div class=""card"">
                    <div class=""card-header"">
                        <h3 class=""card-title""><font style=""vertical-align: inherit;""><strong>Novedades/Incidentes de Partes Diarios</strong></font></h3>
                        <div class=""card-tools"">
                            <button type=""button"" class=""btn btn-tool"" data-card-widget=""collapse"" data-toggle=""tooltip"" title=""Colapso"">
                                <i class=""fas fa-minus""></i>
                            </button>
                        </div>
                    </div>
                    <div class=""card-body"">
                        <div class=""row"">
                            <div class=""col-sm-12 col-md-12"">
                         ");
            WriteLiteral(@"       <div id=""conten_GrillaIncidentes""></div>
                            </div>
                            <div class="" col-sm-12 col-md-4"" hidden>
                                <h4>Parte Diario Proyectos</h4>
                                <div style=""display: block;"">
                                    <div id=""conten_GrillaProyecto""></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>
<section class=""content"">
    <div class=""container-fluid"">
        <div class=""row"">
            <div class=""col-sm-12  col-md-12"">
                <div class=""card"">
                    <div class=""card-header"">
                        <h3 class=""card-title""><font style=""vertical-align: inherit;""><strong>Plazos Previstos</strong></font></h3>
                        <div class=""card-tools"">
                            <button type");
            WriteLiteral(@"=""button"" class=""btn btn-tool"" data-card-widget=""collapse"" data-toggle=""tooltip"" title=""Colapso"">
                                <i class=""fas fa-minus""></i>
                            </button>
                        </div>
                    </div>
                    <div class=""card-body"">
                        <div class=""row"">
                            <div class=""col-sm-12 col-md-12"">
                                <div id=""divTarjetasPlazosPrevistos""></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

");
            DefineSection("scripts", async() => {
                WriteLiteral(@"

    <script>
        localStorage.removeItem('ValoresFiltro');

        $(""#Conten_Creados"").click(function () {
            IncidentesCreados();
        });
        $(""#Conten_Asignados"").click(function () {
            IncidentesAsignados();
        });
        $(""#Conten_PorVencer"").click(function () {
            IncidentesPorVencer();
        });
        $(""#Conten_Vencidos"").click(function () {
            IncidentesVencidos();
        });

	    //// LIMPIEZA DE JSON
	    JSON.stringify = JSON.stringify || function (obj) {
		    var t = typeof (obj);
		    if (t != ""object"" || obj === null) {
			    // simple data type
			    if (t == ""string"") obj = '""' + obj + '""';
			    return String(obj);
		    }
		    else {
			    // recurse array or object
			    var n, v, json = [], arr = (obj && obj.constructor == Array);
			    for (n in obj) {
				    v = obj[n]; t = typeof (v);
				    if (t == ""string"") v = '""' + v + '""';
				    else if (t == ""object"" && v !== null) v = J");
                WriteLiteral(@"SON.stringify(v);
				    json.push((arr ? """" : '""' + n + '"":') + String(v));
			    }
			    var rawString = (arr ? ""["" : ""{"") + String(json) + (arr ? ""]"" : ""}"");
			    return rawString;
		    }
	    };
	    function escape(key, val) {
		    if (typeof (val) != ""string"") return val;

		    var replaced = val
		    return replaced;
	    }
	    JSON.stringifyEscaped = function (obj) {
		    return JSON.stringify(obj, escape);
	    }
	    //// FIN LIMPIEzA JSON
	    var data = JSON.parse(JSON.stringifyEscaped(");
#nullable restore
#line 195 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/Gestion/Index.cshtml"
                                               Write(Html.Raw(Json.Serialize(Model)));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"));

        //grillaproyecto(data.lstObrasParteDiarios);
        grillaIncidentes(data.lstIncidentes);
        getPlazosPrevistos();
        IncidentesIndicadoresHome();

        function grillaproyecto(datos) {
            $(""#conten_GrillaProyecto"").html(""<div id='GrillaProyecto'></div>"");
            var colGrilla = [];
            colGrilla.push({ field: ""proyecto"", title: ""Proyectos"", media: ""(min-width: 450px)"" });
            colGrilla.push({ title: ""Fecha PD"", media: ""(min-width: 450px)"", template: ""#= kendo.toString(kendo.parseDate(fechaUltima), 'dd-MM-yyyy') #"" });
            $(""#GrillaProyecto"").kendoGrid({
                filterable: false,
                sortable: true,
                groupable: false,
                reorderable: false,
                columnMenu: false,
                dataSource: {
                    data: datos
                },
                columns: colGrilla,
                dataBound: function () {
                    dataView = this.dataSou");
                WriteLiteral(@"rce.view();
                    for (var i = 0; i < dataView.length; i++) {
                        if (dataView[i].fechaUltima < datos[0].fechaUltima) {
                            var uid = dataView[i].uid;
                            $(""#GrillaProyecto tbody"").find(""tr[data-uid="" + uid + ""]"").addClass(""K-bacgraundRow_A"");
                        }
                    }

                }
            });
        }

        function grillaIncidentes(datos) {
            $(""#conten_GrillaIncidentes"").html(""<div id='GrillaIncidentes'></div>"");
            var colGrilla = [];
            colGrilla.push({ title: ""Fecha Novedad/Incidente"", media: ""(min-width: 450px)"", template: ""#= kendo.toString(kendo.parseDate(sFecha), 'dd/MM/yyyy') #"" });
            colGrilla.push({ field: ""sProyecto"", title: ""Proyecto"", media: ""(min-width: 450px)"" });
            colGrilla.push({ field: ""sIncidente"", title: ""Tipo Novedad/Incidente"", media: ""(min-width: 450px)"" });
            colGrilla.push({ title: """", wid");
                WriteLiteral(@"th: ""70px"", template: '# if (sComentario) {#<button type=""button"" class=""btn btn-secondary"" data-toggle=""tooltip"" data-placement=""top"" title=""(#=sComentario#)""><i class=""fa fa-info-circle"" aria-hidden=""true""></i></button>#} else {##}#', });
            colGrilla.push({ field: ""sCriticidad"", title: ""Cricticidad"", media: ""(min-width: 450px)"", hidden: true });
            $(""#GrillaIncidentes"").kendoGrid({
                filterable: false,
                sortable: true,
                groupable: false,
                reorderable: false,
                columnMenu: false,
                dataSource: {
                    data: datos
                },
                columns: colGrilla,
                dataBound: function () {
                    dataView = this.dataSource.view();
                    for (var i = 0; i < dataView.length; i++) {
                        if (dataView[i].sCriticidad == ""Bloqueante"") {
                            var uid = dataView[i].uid;
                         ");
                WriteLiteral(@"   $(""#GrillaIncidentes tbody"").find(""tr[data-uid="" + uid + ""]"").addClass(""K-bacgraundRow_A"");
                        }
                        if (dataView[i].sCriticidad == ""Bloqueo Parcial"") {
                            var uid = dataView[i].uid;
                            $(""#GrillaIncidentes tbody"").find(""tr[data-uid="" + uid + ""]"").addClass(""K-bacgraundRow_R"");
                        }
                    }

                }
            });
        }

        function IrParteDiario() {
            window.location.replace(""/ParteDiario/ParteDiario"");

        }

        function IrProyectos() {
            window.location.replace(""/Proyecto/Proyecto/"");

        }

        function IrIncidentes() {
            window.location.replace(""/incidentes/incidentesHistorial"");
        }

        function IncidentesIndicadoresHome() {
            $.post(""/Incidentes/IncidentesIndicadoresHome"").done(function (e) {
                if (!e.isError) {
                    //toastr.succe");
                WriteLiteral(@"ss(e.data, { timeOut: 2000 });
                    $('#Conten_IncCreados').html(e.indCreados);
                    $('#Conten_IncAsignados').html(e.indAsignados);
                    $('#Conten_IncPorVencer').html(e.indPorVencer);
                    $('#Conten_IncVencidos').html(e.indVencidos);
                } else {
                    //toastr.error(e.data, { timeOut: 2000 });
                    $('#Conten_IncCreados').html(0);
                    $('#Conten_IncAsignados').html(0);
                    $('#Conten_IncPorVencer').html(0);
                    $('#Conten_IncVencidos').html(0);
                }
            });
        }

        function IncidentesCreados() {
            var estadoFiltro = { Estado: '6', Visualizacion: 'CR', Situacion: '0', Proyecto: '0', Area: '0', IdIncidente: '0' };
            localStorage.setItem('ValoresFiltro', JSON.stringify(estadoFiltro));
            window.location.replace(""/incidentes/incidentesHistorial"");
        }

        function Inciden");
                WriteLiteral(@"tesAsignados() {
            var estadoFiltro = { Estado: '6', Visualizacion: 'AS', Situacion: '0', Proyecto: '0', Area: '0', IdIncidente: '0' };
            localStorage.setItem('ValoresFiltro', JSON.stringify(estadoFiltro));
            window.location.replace(""/incidentes/incidentesHistorial"");
        }

        function IncidentesPorVencer() {
            var estadoFiltro = { Estado: '6', Visualizacion: 'CA', Situacion: 'PC', Proyecto: '0', Area: '0', IdIncidente: '0' };
            localStorage.setItem('ValoresFiltro', JSON.stringify(estadoFiltro));
            window.location.replace(""/incidentes/incidentesHistorial"");
        }

        function IncidentesVencidos() {
            var estadoFiltro = { Estado: '6', Visualizacion: 'CA', Situacion: 'VE', Proyecto: '0', Area: '0', IdIncidente: '0' };
            localStorage.setItem('ValoresFiltro', JSON.stringify(estadoFiltro));
            window.location.replace(""/incidentes/incidentesHistorial"");
        }

        function getPlazosP");
                WriteLiteral(@"revistos() {
            $.get(""/Gestion/Get_PlazosPrevistos"", function (res) {
                if (res.isError) {
                    toastr.error(res.message, { timeOut: 2000 });
                } else {
                    cargarTarjetasPlazosPrevistos(res.lPlazosPrevistos);
                }
            });
        }

        function cargarTarjetasPlazosPrevistos(lPlazosPrevistos) {
            let contenido = ""<div class='row'>"";
            lPlazosPrevistos.forEach(pp => {
                contenido += `
                    <div class=""col-lg-3 col-6"">
                      <div class='card'>
                        <div class=""card-body"">
                            <p class=""info-box-text text-truncate"" title=""`+ pp.nombre + `"" style=""font-size: 1.3em""><span class=""font-weight-bold"">` + pp.nombre.toUpperCase() + `</p>
                            <p class=""info-box-text"">Fec. Fin Prev.: ` + pp.fechaFinPrevista + `</p>
                            <p class=""info-box-text"">Fec. Fin Plan");
                WriteLiteral(@".: ` + pp.fechaPlanificadaFin + `</p>
                            <p class=""info-box-number""><h3 class=""font-weight-bold"">Días Dif.: <span class="" `+ (pp.diasDiferencia < 0 ? `text-success` : `text-danger`) + `"">` + pp.diasDiferencia + `</span></h3></p>
                        </div>
                      </div>
                    </div>
                `;
            });
            contenido += ""</div>"";
            $(""#divTarjetasPlazosPrevistos"").html(contenido);
        }

    </script>

");
            }
            );
            WriteLiteral("\r\n");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Gestion.EF.ItemCargaHome> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
