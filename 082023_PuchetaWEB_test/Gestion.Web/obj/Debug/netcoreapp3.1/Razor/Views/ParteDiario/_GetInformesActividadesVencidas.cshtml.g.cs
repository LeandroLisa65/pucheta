#pragma checksum "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/ParteDiario/_GetInformesActividadesVencidas.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "17d54bda22dd81b78a59edcf32768856c4ea697b"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_ParteDiario__GetInformesActividadesVencidas), @"mvc.1.0.view", @"/Views/ParteDiario/_GetInformesActividadesVencidas.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/_ViewImports.cshtml"
using Gestion.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/_ViewImports.cshtml"
using Gestion.Web.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/_ViewImports.cshtml"
using Gestion.Web.ViewModels.Input;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"17d54bda22dd81b78a59edcf32768856c4ea697b", @"/Views/ParteDiario/_GetInformesActividadesVencidas.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"3bee31758dd1cbb7e600e265aed2cb74227e9428", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_ParteDiario__GetInformesActividadesVencidas : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<Gestion.EF.Models.Informe_Actividad_Vencida>>
    #nullable disable
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral(@"
<div class=""form-group"">
    <div class=""row"">
        <div id=""divFiltroProyectos"" class=""col-md-3""></div>
        <div id=""divFiltroUbicaciones"" class=""col-md-3""></div>
        <div id=""divFiltroActividades"" class=""col-md-3""></div>
        <div class=""col-md-3"">
            <button type=""button"" onclick=""Filtrar()"" class=""btn btn-default float-right""
                    style=""margin-top: 1.9em"">
                <i class=""fa fa-search""></i>
                Buscar
            </button>
        </div>
    </div>
</div>
<div id=""divGrilla""></div>

<script>

    var lInfActVencidas = JSON.parse('");
#nullable restore
#line 21 "/Users/leandrolisa/Projects/082023_PuchetaWEB_test/Gestion.Web/Views/ParteDiario/_GetInformesActividadesVencidas.cshtml"
                                 Write(Html.Raw(Json.Serialize(Model)));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"');

    function renderizarFiltroProyectos() {
        var lProyectos = [];
        lInfActVencidas.forEach(iac => {
            if (!lProyectos.find(p => p.id == iac.proyectoId)) {
                lProyectos.push({ id: iac.proyectoId, nombre: iac.sProyecto });
            }
        });
        var select = ""<label>Proyecto</label><select id='slcProyectos' class='form-control'>#items</select>"";
        var options = ""<option value='0' selected>Todos</option>"";
        lProyectos.forEach(p => {
            options += ""<option value='"" + p.id + ""'>"" + p.nombre + ""</option>"";
        })
        select = select.replace(""#items"", options);
        var divFiltroProyectos = document.getElementById(""divFiltroProyectos"");
        divFiltroProyectos.innerHTML = select;
    }
    function renderizarFiltroUbicaciones() {
        var lUbicaciones = [];
        lInfActVencidas.forEach(iac => {
            if (!lUbicaciones.find(a => a.id == iac.proyectoUbicacionId)) {
                lUbicaciones.pus");
            WriteLiteral(@"h({ id: iac.proyectoUbicacionId, nombre: iac.sProyUbicacion });
            }
        });
        var select = ""<label>Ubicación</label><select id='slcUbicaciones' class='form-control'>#items</select>"";
        var options = ""<option value='0' selected>Todas</option>"";
        lUbicaciones.forEach(a => {
            options += ""<option value='"" + a.id + ""'>"" + a.nombre + ""</option>"";
        })
        select = select.replace(""#items"", options);
        var divFiltroUbicaciones = document.getElementById(""divFiltroUbicaciones"");
        divFiltroUbicaciones.innerHTML = select;
    }
    function renderizarFiltroActividades() {
        var lActividades = [];
        lInfActVencidas.forEach(iac => {
            if (!lActividades.find(a => a.id == iac.planActividadId)) {
                lActividades.push({ id: iac.planActividadId, nombre: iac.sPlanActividad });
            }
        });
        var select = ""<label>Actividad</label><select id='slcActividades' class='form-control'>#items</select");
            WriteLiteral(@">"";
        var options = ""<option value='0' selected>Todas</option>"";
        lActividades.forEach(a => {
            options += ""<option value='"" + a.id + ""'>"" + a.nombre + ""</option>"";
        })
        select = select.replace(""#items"", options);
        var divFiltroActividades = document.getElementById(""divFiltroActividades"");
        divFiltroActividades.innerHTML = select;
    }
    function renderizarGrilla() {
        $(""#divGrilla"").html(""<div id='divGrillaResultado'></div>"");
        var columns = [];
        columns.push({ field: ""Id"", title: ""id"", media: ""(min-width: 450px)"", hidden: true });
        columns.push({ field: ""sProyecto"", title: ""Proyecto"", media: ""(min-width: 450px)"" });
        columns.push({ field: ""sProyUbicacion"", title: ""Ubicación"", media: ""(min-width: 450px)"" });
        columns.push({ field: ""sPlanActividad"", title: ""Actividad"", media: ""(min-width: 450px)"" });
        columns.push({ field: ""fechaEstimadaFin"", title: ""Fecha Est. Fin"", media: ""(min-width: 450px");
            WriteLiteral(@")"" });
        columns.push({ field: ""diasVencida"", title: ""Dias Vencida"", media: ""(min-width: 450px)"" });
        columns.push({ field: ""fechaUltimoAvance"", title: ""Fec. Último Avance"", media: ""(min-width: 450px)"" });
        columns.push({ field: ""porcAvanceObra"", title: ""% Avance de Obra"", media: ""(min-width: 450px)"" });
        $(""#divGrillaResultado"").kendoGrid({
            filterable: false,
            sortable: true,
            groupable: false,
            reorderable: true,
            columnMenu: true,
            toolbar: [""excel""],
            excel: {
                fileName: ""InformeActidadesVencidas.xlsx"",
                allPages: true,
                filterable: true
            },
            dataSource: {
                data: lInfActVencidas
            },
            columns: columns,
        });
    }

    renderizarFiltroProyectos();
    renderizarFiltroUbicaciones();
    renderizarFiltroActividades();
    renderizarGrilla();

    function Filtrar() {
 ");
            WriteLiteral(@"       var oFiltro = {
            IdProyecto: document.getElementById(""slcProyectos"").value,
            IdUbicacion: document.getElementById(""slcUbicaciones"").value,
            IdActividad: document.getElementById(""slcActividades"").value
        }
        $.post(""/ParteDiario/Get_InformeActividadesVencidas_X_oFiltro"", oFiltro).done(function (res) {
            if (!res.error) {
                lInfActVencidas = res.lInfActVencidas;
                renderizarGrilla();
            }
        });
    }

</script>

");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<Gestion.EF.Models.Informe_Actividad_Vencida>> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
